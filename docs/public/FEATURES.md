# ToonForge Features

## 🎨 NPR Effects

### 1. 툰 셰이딩 (Toon Shading)
**애니메이션과 만화 스타일의 단계적 명암 효과**

#### 주요 기능
- **색상 단계화**: 3-8단계로 조정 가능한 색상 양자화
- **커스텀 그림자**: 그림자 색상과 강도 개별 설정
- **하이라이트 제어**: 반짝이는 하이라이트 효과 조정
- **림 라이팅**: 오브젝트 가장자리 빛 효과

#### 사용법
```
키보드 단축키:
- 1~8: 툰 단계 수 조정 (1=매우 부드러움, 8=매우 단계적)
- A/S: 툰 셰이딩 켜기/끄기
- Q/W: 그림자 강도 조정
```

#### 적용 예시
- **애니메이션 스타일**: 3-4단계로 부드러운 셀 셰이딩
- **만화책 스타일**: 5-6단계로 명확한 명암 대비
- **게임 스타일**: 4-5단계로 실시간 게임에 최적화

---

### 2. 아웃라인 렌더링 (Outline Rendering)
**오브젝트 윤곽선을 강조하는 효과**

#### 구현 방식
**A. 엣지 검출 방식 (Edge Detection)**
- 깊이 버퍼와 법선 버퍼를 분석해서 윤곽선 검출
- 높은 품질, 중간 성능 비용
- 복잡한 형태의 오브젝트에 적합

**B. 지오메트리 확장 방식 (Geometry Expansion)**  
- 메시를 법선 방향으로 확장해서 윤곽선 생성
- 빠른 성능, 간단한 구현
- 단순한 형태의 오브젝트에 적합

#### 주요 설정
- **두께**: 0.1 ~ 5.0 픽셀
- **색상**: 자유로운 색상 선택 (기본: 검은색)
- **검출 민감도**: 윤곽선 검출 정확도 조정

#### 사용법
```
키보드 단축키:
- Z/X: 아웃라인 켜기/끄기
- E/R: 아웃라인 두께 조정
- T: 검출 방식 전환 (엣지 검출 ↔ 지오메트리 확장)
```

---

### 3. 수채화 효과 (Watercolor Effect)
**부드럽고 따뜻한 수채화 질감 효과**

#### 주요 기능
- **노이즈 변형**: 다중 스케일 노이즈로 자연스러운 색상 변화
- **색상 블리딩**: 주변 색상과 자연스럽게 번지는 효과
- **종이 질감**: 수채화 종이의 거친 질감 오버레이
- **채도 조정**: 수채화 특유의 부드러운 색감

#### 설정 옵션
- **효과 강도**: 0.0 ~ 1.0 (0=원본, 1=완전한 수채화)
- **노이즈 스케일**: 질감의 세밀함 조정
- **블리딩 반경**: 색상 번짐 범위 설정
- **종이 질감 강도**: 종이 텍스처 적용 정도

#### 사용법
```
키보드 단축키:
- C/V: 수채화 효과 켜기/끄기
- F/G: 효과 강도 조정
- H/J: 노이즈 스케일 조정
```

---

## 🛠️ 아티스트 도구

### 1. NPR 제어 패널
**에디터 내 전용 UI 패널**

#### 주요 기능
- **실시간 프리뷰**: 파라미터 변경 시 즉시 뷰포트에 반영
- **슬라이더 컨트롤**: 직관적인 수치 조정
- **컬러 피커**: 그림자 색상, 아웃라인 색상 등 설정
- **체크박스**: 각 효과 개별 활성화/비활성화

#### 접근 방법
```
에디터 메뉴: Window → ToonForge → NPR Control Panel
```

### 2. 프리셋 시스템
**NPR 스타일을 저장하고 공유**

#### 기본 제공 프리셋
- **Animation Style**: 부드러운 애니메이션 느낌 (툰 3단계 + 얇은 아웃라인)
- **Comic Book**: 만화책 스타일 (툰 5단계 + 굵은 검은 아웃라인)
- **Watercolor**: 수채화 스타일 (툰 4단계 + 수채화 효과)
- **Sketch**: 스케치 느낌 (얇은 아웃라인 + 낮은 채도)

#### 커스텀 프리셋
- **저장**: 현재 설정을 새 프리셋으로 저장
- **로드**: 저장된 프리셋 불러오기
- **공유**: JSON 파일로 내보내기/가져오기
- **삭제**: 불필요한 프리셋 제거

### 3. 배치 처리 도구
**여러 오브젝트에 NPR 효과 일괄 적용**

#### 기능
- **씬 전체 적용**: 현재 레벨의 모든 오브젝트에 NPR 적용
- **선택 오브젝트**: 선택된 오브젝트들에만 적용
- **머티리얼 백업**: 원본 머티리얼 자동 백업
- **원상 복구**: 원본 상태로 되돌리기

---

## ⚡ 성능 시스템

### 1. 실시간 성능 모니터링
**NPR 효과의 성능 영향을 실시간으로 표시**

#### 표시 정보
- **전체 FPS**: 현재 프레임레이트
- **NPR GPU 시간**: NPR 효과들이 사용하는 GPU 시간 (ms)
- **메모리 사용량**: NPR 전용 메모리 사용량 (MB)
- **효과별 비용**: 각 NPR 효과의 개별 성능 비용

#### 성능 UI 표시
```
키보드 단축키:
- Tab: 성능 UI 표시/숨기기
- P: 상세 성능 정보 토글
```

### 2. 자동 품질 조정
**목표 FPS를 유지하기 위한 자동 최적화**

#### 동작 방식
1. **목표 FPS 설정** (30/60/120 FPS 중 선택)
2. **성능 모니터링**: 실시간으로 현재 FPS 측정
3. **자동 조정**: 
   - FPS가 목표보다 낮으면 → NPR 품질 자동 감소
   - FPS가 목표보다 높으면 → NPR 품질 자동 증가

#### 품질 조정 단계
- **High**: 모든 효과 최고 품질
- **Medium**: 일부 효과 품질 감소 (샘플링 수 감소)
- **Low**: 효과 단순화 (아웃라인만 유지)
- **Off**: NPR 효과 완전 비활성화

### 3. LOD (Level of Detail) 시스템
**거리에 따른 NPR 품질 자동 조정**

#### 거리별 품질
- **가까운 거리 (0-100m)**: 최고 품질 NPR
- **중간 거리 (100-500m)**: 중간 품질 NPR  
- **먼 거리 (500m+)**: 최소 품질 또는 NPR 비활성화

---

## 🎮 실시간 제어

### 키보드 단축키 전체 목록
```
=== NPR 효과 제어 ===
A/S     : 툰 셰이딩 켜기/끄기
Z/X     : 아웃라인 켜기/끄기  
C/V     : 수채화 효과 켜기/끄기

=== 파라미터 조정 ===
1~8     : 툰 단계 수 (1=부드러움, 8=단계적)
Q/W     : 그림자 강도 증가/감소
E/R     : 아웃라인 두께 증가/감소
F/G     : 수채화 강도 증가/감소
H/J     : 노이즈 스케일 증가/감소

=== 시스템 제어 ===
Tab     : 성능 UI 표시/숨기기
P       : 상세 성능 정보 토글
T       : 아웃라인 방식 전환
O       : 자동 품질 조정 켜기/끄기
```

### 마우스 제어
- **휠 스크롤**: 전체 NPR 강도 조정 (Ctrl + 휠)
- **우클릭 드래그**: 실시간 파라미터 조정 모드

---

## 📊 성능 벤치마크

### 테스트 환경
- **GPU**: RTX 3070
- **해상도**: 1920x1080
- **설정**: Epic 품질
- **씬**: 중간 복잡도 (100개 오브젝트)

### 성능 결과
| NPR 효과 | GPU 시간 | 메모리 사용량 | FPS 영향 |
|----------|----------|---------------|----------|
| 툰 셰이딩 | 0.8ms | 12MB | ~5% |
| 아웃라인 (엣지 검출) | 1.2ms | 8MB | ~7% |
| 아웃라인 (지오메트리) | 0.6ms | 4MB | ~3% |
| 수채화 효과 | 1.5ms | 16MB | ~9% |
| **전체 조합** | **3.1ms** | **32MB** | **~18%** |

### 최적화 효과
- **렌더 타겟 풀링**: 메모리 할당 60% 감소
- **배치 처리**: 드로우콜 40% 감소  
- **자동 LOD**: 먼 거리 오브젝트 성능 70% 향상

---

## 🔧 고급 기능

### 1. 커스텀 셰이더 지원
**개발자를 위한 확장 기능**

- NPR 효과용 커스텀 셰이더 작성 가능
- 기존 효과와 조합하여 새로운 스타일 창조
- 셰이더 핫 리로드 지원 (개발 중 즉시 반영)

### 2. 멀티플랫폼 최적화
**다양한 플랫폼 지원**

- **PC**: 최고 품질 NPR 효과
- **모바일**: 경량화된 NPR 버전 (추후 지원 예정)
- **콘솔**: 플랫폼별 최적화 (추후 지원 예정)

### 3. 확장성
**미래 기능 확장을 위한 준비**

- 새로운 NPR 효과 쉽게 추가 가능한 구조
- 플러그인 API를 통한 서드파티 확장 지원
- 커뮤니티 프리셋 공유 시스템 (계획 중)

---

## 💡 사용 팁

### 최적의 NPR 스타일 만들기
1. **기본 프리셋으로 시작**: 원하는 스타일과 가장 비슷한 프리셋 선택
2. **단계적 조정**: 한 번에 하나씩 파라미터 조정
3. **성능 확인**: Tab 키로 성능 영향 실시간 확인
4. **프리셋 저장**: 만족스러운 결과를 프리셋으로 저장

### 성능 최적화 팁
- **목표 FPS 설정**: 자동 품질 조정 활용
- **효과 선택적 사용**: 모든 효과를 동시에 사용할 필요 없음
- **LOD 활용**: 먼 거리 오브젝트는 자동으로 품질 조정됨
- **프로파일링**: 성능 UI로 병목 지점 파악

---

ToonForge는 **실시간 NPR 렌더링의 새로운 가능성**을 제공하며, 아티스트와 개발자 모두에게 강력하고 사용하기 쉬운 도구를 제공합니다.
